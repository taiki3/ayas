# Ayas Playground — フロントエンドデザイン依頼

## コンセプト

Ayas は Rust 製の AI エージェント構築フレームワーク。
このプロジェクトの機能を体験できる **開発者向け Playground Web アプリ** のモックを作成してほしい。

ターゲットユーザー: AI エージェント開発に興味のあるエンジニア。
トーン: テクニカルだがクリーン。ダッシュボード寄りのレイアウト。

---

## 画面構成 (4画面 + 共通ヘッダー)

### 共通ヘッダー

- ロゴ「Ayas Playground」(左)
- タブナビゲーション: **Chat** | **Agent** | **Graph** | **Research**
- 右端: API Keys 設定ボタン (モーダルで開く)

**API Keys モーダル:**
- Gemini API Key (パスワード入力)
- Anthropic API Key (パスワード入力)
- OpenAI API Key (パスワード入力)
- 保存ボタン

---

### 画面 1: Chat

シンプルな LLM チャット画面。

**レイアウト: 2カラム**

```
┌─────────────────────┬──────────────────────────────────┐
│   設定パネル (280px) │          チャットエリア            │
│                     │                                  │
│  [Provider ▼]       │  ┌──────────────────────────┐    │
│   Gemini            │  │ System: You are a ...    │    │
│   Claude            │  └──────────────────────────┘    │
│   OpenAI            │                                  │
│                     │  👤 Rustの所有権について教えて     │
│  [Model ▼]          │                                  │
│   gemini-2.0-flash  │  🤖 Rustの所有権は...            │
│                     │     tokens: 12 in / 89 out       │
│  Temperature        │                                  │
│  ──●────── 0.7      │  👤 もっと詳しく                   │
│                     │                                  │
│  Max Tokens         │  🤖 所有権システムは3つの...       │
│  [  1024  ]         │     tokens: 45 in / 156 out      │
│                     │                                  │
│  System Prompt      │                                  │
│  ┌───────────────┐  │                                  │
│  │You are a      │  │  ┌──────────────────────────┐    │
│  │helpful...     │  │  │ メッセージを入力...  [送信] │    │
│  └───────────────┘  │  └──────────────────────────┘    │
└─────────────────────┴──────────────────────────────────┘
```

**設定パネル:**
- Provider: ドロップダウン (Gemini / Claude / OpenAI)
- Model: プロバイダに応じたモデルリスト
- Temperature: スライダー (0.0〜2.0)
- Max Tokens: 数値入力
- System Prompt: 複数行テキストエリア

**チャットエリア:**
- メッセージバブル (ユーザー右寄せ / AI 左寄せ)
- AI 応答の下に小さくトークン使用量 (`128 in / 256 out`)
- 応答中はタイピングアニメーション
- 入力欄 + 送信ボタン (下部固定)

---

### 画面 2: Agent

ツール付き ReAct エージェントとの対話画面。メインの差別化機能。

**レイアウト: 3カラム**

```
┌───────────────┬──────────────────────┬──────────────────────┐
│ ツール設定     │     チャット          │   実行トレース        │
│   (260px)     │                      │     (340px)          │
│               │                      │                      │
│ ☑ Calculator  │ 👤 2+3は？            │ Step 1: agent        │
│ ☑ DateTime    │                      │  LLM呼出し           │
│ ☐ Web Search  │ 🤖 計算します...      │  → tool_calls:       │
│               │    結果: 5です        │    calculator(2+3)   │
│ ─────────────│                      │                      │
│ Provider      │                      │ Step 2: tools        │
│ [Gemini ▼]   │                      │  calculator 実行     │
│               │                      │  → result: "5"       │
│ Model         │                      │                      │
│ [gemini-2.0 ▼]│                      │ Step 3: agent        │
│               │                      │  LLM呼出し           │
│ Recursion     │                      │  → tool_calls: なし  │
│ Limit         │                      │  → END               │
│ ──●──── 25   │                      │                      │
│               │                      │ ✅ 3ステップで完了    │
│ [+ カスタム   │                      │                      │
│  ツール追加]  │  [メッセージ入力 送信] │                      │
└───────────────┴──────────────────────┴──────────────────────┘
```

**ツール設定パネル (左):**
- ビルトインツール一覧 (チェックボックスで有効/無効)
  - Calculator — 四則演算
  - DateTime — 現在時刻取得
  - (将来追加可能な枠)
- モデル設定 (Provider / Model)
- Recursion Limit スライダー (1〜100, デフォルト 25)
- 「+ カスタムツール追加」ボタン → モーダル:
  - ツール名
  - 説明文
  - パラメータ JSON Schema (コードエディタ)

**チャットエリア (中央):**
- Chat 画面と同じメッセージバブル
- ツール使用時は特別な表示:
  - ツール呼び出し: `🔧 calculator({ "expression": "2+3" })` (折りたたみ可)
  - ツール結果: `→ "5"` (小さいインライン表示)
- 最終回答は通常の AI バブル

**実行トレース (右):**
- ステップごとの縦タイムライン表示
- 各ステップカード:
  - ステップ番号
  - ノード名 (`agent` or `tools`) をバッジ表示
  - 処理内容の要約
  - 展開すると詳細 JSON (state の中身)
- 実行中はアクティブなステップがハイライト + スピナー
- 完了時: 「N ステップで完了」バッジ

---

### 画面 3: Graph

グラフワークフローのビジュアルビルダー。上級者向け。

**レイアウト: キャンバス + サイドパネル**

```
┌──────────────────────────────────────┬──────────────────┐
│              キャンバス               │   プロパティ      │
│                                      │                  │
│    ┌───────┐                         │ Node: summarize  │
│    │ START │─────→┌──────────┐       │                  │
│    └───────┘      │ fetch    │       │ Type:            │
│                   └────┬─────┘       │ [LLM Call ▼]     │
│                        │             │                  │
│                   ┌────▼─────┐       │ Prompt:          │
│                   │summarize │       │ ┌──────────────┐ │
│                   └────┬─────┘       │ │Summarize:    │ │
│                        │             │ │{text}        │ │
│               ┌────────▼────────┐    │ └──────────────┘ │
│               │   router        │    │                  │
│               └──┬──────────┬───┘    │ Provider:        │
│          yes     │          │ no     │ [Gemini ▼]       │
│           ┌──────▼──┐  ┌───▼────┐   │                  │
│           │ refine  │  │  END   │   │──────────────────│
│           └────┬────┘  └────────┘   │ Channels         │
│                │                     │ ┌──────────────┐ │
│                └─────→ router        │ │text: Last(""）│ │
│                                      │ │msgs: Append  │ │
│                                      │ └──────────────┘ │
│──────────────────────────────────────│                  │
│ [+ Node]  [Validate ✓]  [▶ Run]     │ [JSON入力]       │
│                                      │ [▶ 実行]         │
└──────────────────────────────────────┴──────────────────┘
```

**キャンバス:**
- ノードをドラッグ&ドロップで配置
- ノード間をドラッグで辺を接続
- `START` / `END` は固定の特殊ノード (色を変える)
- 条件辺は点線 + ラベル (`yes` / `no` 等)
- ノードダブルクリック → 右パネルに詳細表示

**ノード種類 (追加時に選択):**
| 種類 | 説明 | アイコン |
|---|---|---|
| LLM Call | LLM にプロンプトを送る | 吹き出し |
| Conditional | 状態の値で分岐する | ひし形 |
| Transform | 状態の値を変換する | 歯車 |

**プロパティパネル (右):**
- 選択ノードの設定
- チャネル定義:
  - キー名 + タイプ (`LastValue` / `Append`)
  - LastValue のデフォルト値

**ツールバー (下部):**
- 「+ Node」ボタン
- 「Validate」ボタン — 検証結果をトースト通知
  - 成功: 緑チェック
  - 失敗: 赤エラー + メッセージ (例: 「ノード 'X' に到達できません」)
- 「Run」ボタン → 実行モーダル:
  - 入力 JSON エディタ
  - 実行ボタン
  - 実行アニメーション: 通過中のノードが順番にハイライト (パルス)
  - 各ステップのチャネル状態をステップスライダーで確認
  - 最終出力 JSON

---

### 画面 4: Research

Gemini Deep Research の実行画面。

**レイアウト: 1カラム (中央寄せ)**

```
┌──────────────────────────────────────────────────────────┐
│                                                          │
│  ┌────────────────────────────────────────────────────┐  │
│  │                                                    │  │
│  │  量子コンピューティングの現状と課題について         │  │
│  │  詳しく調査してください                              │  │
│  │                                                    │  │
│  └────────────────────────────────────────────────────┘  │
│                                                          │
│  Agent: [deep-research-pro ▼]    [▶ リサーチ開始]       │
│                                                          │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 75% リサーチ中...       │
│                                                          │
│  ┌────────────────────────────────────────────────────┐  │
│  │                                                    │  │
│  │  # 量子コンピューティングの現状と課題              │  │
│  │                                                    │  │
│  │  ## 1. 概要                                       │  │
│  │  量子コンピューティングは...                       │  │
│  │                                                    │  │
│  │  ## 2. 主要なアプローチ                           │  │
│  │  ...                                              │  │
│  │  (Markdown レンダリング)                          │  │
│  │                                                    │  │
│  └────────────────────────────────────────────────────┘  │
│                                                          │
│  ┌────────────────────────────────────────────────────┐  │
│  │ フォローアップ質問を入力...              [送信]    │  │
│  └────────────────────────────────────────────────────┘  │
│                                                          │
└──────────────────────────────────────────────────────────┘
```

**入力エリア:**
- リサーチクエリ (複数行テキストエリア、大きめ)
- Agent 選択ドロップダウン
- 「リサーチ開始」ボタン

**進捗表示:**
- プログレスバー + ステータステキスト
- ストリーミング時: テキストがリアルタイムに流れ込む

**結果表示:**
- Markdown レンダリング (見出し、リスト、コードブロック対応)
- 結果のコピーボタン

**フォローアップ:**
- 結果の下に追加質問の入力欄
- 前回のリサーチを踏まえた追加調査が可能

---

## 状態・インタラクションの補足

### 応答中の状態
- 送信ボタン → 無効化 + スピナー
- Chat/Agent: タイピングインジケータ (「...」アニメーション)
- Research: プログレスバーアニメーション
- キャンセルボタン表示

### エラー表示
| 状況 | 表示 |
|---|---|
| API キー未設定 | 「API キーを設定してください」バナー + 設定モーダルへリンク |
| API キー無効 | 赤トースト「認証エラー: API キーを確認してください」 |
| レート制限 | 黄トースト「レート制限中です。しばらく待ってください」 |
| ステップ上限到達 | 黄トースト「ステップ上限 (25) に達しました」 |
| グラフ検証エラー | 赤トースト + エラー詳細 |

### レスポンシブ
- 最小幅 1024px (開発者ツール想定)
- モバイル非対応で OK

---

## デザイントーン参考

- **Vercel AI Playground** — クリーンなチャット UI
- **LangGraph Studio** — グラフビジュアライゼーション
- **OpenAI Playground** — モデル設定パネル

ダーク/ライトモード切替があると嬉しいが、まずはライトモードのみで OK。
